[**Documentation**](../../../README.md)

***

[Documentation](../../../README.md) / [utils/react-hook-monitor](../README.md) / REACT\_HOOK\_MONITOR\_SCRIPT

# Variable: REACT\_HOOK\_MONITOR\_SCRIPT

> `const` **REACT\_HOOK\_MONITOR\_SCRIPT**: "\n(function() \{\n  // Check if React is available\n  if (typeof window.React === 'undefined') \{\n    console.warn('\[CLiTS-React-Monitor\] React not found on window. Skipping hook monitoring.');\n    return;\n  \}\n\n  // Store original hooks\n  const originalUseState = window.React.useState;\n  const originalUseEffect = window.React.useEffect;\n  const originalCreateElement = window.React.createElement;\n\n  // Patch useState\n  window.React.useState = function(...args) \{\n    const \[value, setter\] = originalUseState.apply(this, args);\n    console.log('\[CLiTS-React-Monitor\] useState called', \{ initialValue: args\[0\], currentValue: value \});\n\n    const newSetter = (newValue) =\> \{\n      console.log('\[CLiTS-React-Monitor\] useState setter called', \{ oldValue: value, newValue \});\n      return setter(newValue);\n    \};\n\n    return \[value, newSetter\];\n  \};\n\n  // Patch useEffect\n  window.React.useEffect = function(...args) \{\n    const \[effect, dependencies\] = args;\n    console.log('\[CLiTS-React-Monitor\] useEffect called', \{ dependencies \});\n\n    // Wrap the effect to log its execution\n    const wrappedEffect = () =\> \{\n      console.log('\[CLiTS-React-Monitor\] useEffect executing', \{ dependencies \});\n      const cleanup = effect();\n      if (typeof cleanup === 'function') \{\n        return () =\> \{\n          console.log('\[CLiTS-React-Monitor\] useEffect cleanup');\n          cleanup();\n        \};\n      \}\n      return cleanup;\n    \};\n\n    return originalUseEffect.call(this, wrappedEffect, dependencies);\n  \};\n\n  // Patch React.createElement for prop monitoring\n  window.React.createElement = function(type, props, ...children) \{\n    if (typeof type === 'string') \{ // For intrinsic elements (e.g., 'div', 'p')\n      console.log('\[CLiTS-React-Monitor\] HTMLElement created/updated with props:', \{ type, props \});\n    \} else if (typeof type === 'function' \|\| (typeof type === 'object' && type !== null && (type.$$typeof === Symbol.for('react.memo') \|\| type.$$typeof === Symbol.for('react.forward\_ref')))) \{ // For React components\n      const componentName = type.displayName \|\| type.name \|\| (type.type && (type.type.displayName \|\| type.type.name)) \|\| 'UnknownComponent';\n      console.log('\[CLiTS-React-Monitor\] Component created/updated with props:', \{ component: componentName, props \});\n    \}\n    return originalCreateElement.apply(this, arguments);\n  \};\n\n  // Attempt to hook into React DevTools Global Hook for lifecycle monitoring\n  if (typeof window.\_\_REACT\_DEVTOOLS\_GLOBAL\_HOOK\_\_ !== 'undefined') \{\n    const hook = window.\_\_REACT\_DEVTOOLS\_GLOBAL\_HOOK\_\_;\n\n    // Patch onCommitFiberRoot for component mount/update\n    const originalOnCommitFiberRoot = hook.onCommitFiberRoot;\n    hook.onCommitFiberRoot = function(...args) \{\n      console.log('\[CLiTS-React-Monitor\] onCommitFiberRoot (component mounted/updated)', \{ fiberRoot: args\[1\] \});\n      return originalOnCommitFiberRoot.apply(this, args);\n    \};\n\n    // Patch onCommitFiberUnmount for component unmount\n    const originalOnCommitFiberUnmount = hook.onCommitFiberUnmount;\n    hook.onCommitFiberUnmount = function(...args) \{\n      console.log('\[CLiTS-React-Monitor\] onCommitFiberUnmount (component unmounted)', \{ fiber: args\[1\] \});\n      return originalOnCommitFiberUnmount.apply(this, args);\n    \};\n    console.log('\[CLiTS-React-Monitor\] React DevTools Global Hook found and patched for lifecycle monitoring.');\n  \} else \{\n    console.warn('\[CLiTS-React-Monitor\] React DevTools Global Hook not found. Advanced component lifecycle monitoring may be limited.');\n  \}\n\n  console.log('\[CLiTS-React-Monitor\] React hooks monitoring injected.');\n\})();\n"

Defined in: utils/react-hook-monitor.ts:3
